<% content_for :page_title, @article.title %>

<section class="section">
    <div class="container">
        <nav class="level">
          <!-- Left side -->
          <div class="level-left">
            <p class="level-item">
                <strong>Actions</strong>
            </p>
          </div>
          <!-- Right side -->
          <div class="level-right">
              <p class="level-item">
                <%= link_to "Edit", edit_article_path(@article), class:"button" %>
              </p>
              <p class="level-item">
                <%= link_to "Delete", article_path(@article), method: :delete, data: { confirm: "Are you sure?" }, class:"button is-danger" %>
                </p>
          </div>
        </nav>
        <hr/>

        <div class="content">
            <%= @article.body %>
        </div>
    </div>
</section>

<section class="section comments">
    <div class="container">
        <h2 class="subtitle is-5"><strong><%= @article.comments.count %></strong> Comments</h2>
        <%= render @article.comments %>
        <div class="comment-form">
            <hr />
            <h3 class="subtitle is-3">Leave a reply</h3>
             <%= render 'comments/form' %>
        </div>
    </div>
</section>

<%= simple_form_for([@article, @article.comments.build]) do |f| %>
  <!--
  collection.build(attributes = {}, …) Returns one or more new objects of the collection type that have been instantiated with attributes and linked to this object through a foreign key, but have not yet been saved. Note: This only works if an associated object already exists, not if it‘s nil!
  -->
  <div class="field">
    <div class="control">
      <%= f.input :title, input_html: { class: 'input' }, wrapper: false, label_html: { class: 'label' } %>
    </div>
  </div>
  
  <div class="field">
    <div class="control">
      <%= f.input :comment, input_html: { class: 'textarea' }, wrapper: false, label_html: { class: 'label' }  %>
    </div>
  </div>
  <%= f.button :submit, 'Leave a reply', class: "button is-primary" %>
  <% end %>

<p id="notice"><%= notice %></p>

<p>
#   <strong>Title:</strong>
#   <%= @article.title %>
# </p>

# <p>
#   <strong>Author:</strong>
#   <%= @article.author %>
# </p>

# <p>
#   <strong>Body:</strong>
#   <%= @article.body %>
# </p>

# <p>
# <h3>Comments</h3>
# <% @comments.each do |comment| %>
#   <div>
#     <strong><%= comment.name %></strong>
#     <br>
#     <p><%= comment.body %></p>
#     <p><%= link_to 'Delete', comment_path(comment), method: :delete, data: { confirm: 'Are you sure?' } %></p>
#   </div>
# <% end %>
# <%= render partial: 'comments/form', locals: { comment: @comment } %>
# </p>

<%= link_to 'Edit', edit_article_path(@article) %> |
<%= link_to 'Back', articles_path %>
